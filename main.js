(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"+OYU":function(e,t,a){e.exports={"nav-tab":"_2fJZJ0P8bFkWeucMvppgsD","access-bits-block":"_315D8wXwWkHvLPFlGuTVOz",selected:"_3I4Lq88_n5hNOV1XXSaIAH"}},"2YZa":function(e,t,a){"use strict";a.r(t);var n=a("R7uB"),s=a.n(n),r=a("q1tI"),c=a.n(r),i=a("i8i4"),o=a.n(i),l=a("u4tm"),d=a("LvDl"),u=a.n(d),m=a("/MKj"),h=a("jKe7"),p=a("2INN"),f=a("mf+E"),b=(a("j+Us"),a("tRgb")),g=a("LhCv"),k=a("ANjH"),E=a("sINF"),w=a("QX0P");const B=Object(g.a)(),A=k.d,y=Object(k.e)((v=B,Object(k.c)({router:Object(l.b)(v),mifare:w.a})),A(Object(k.a)(Object(b.a)(B),E.a)));var v,C=a("uNOt"),S=a("tiWs"),O=a("374E"),F=a("a5/R"),j=a("nsn4"),T=a("9a8N"),I=a("F66N");class M extends c.a.Component{constructor(){super(...arguments),this.state={isOpen:!1},this.handleToggle=()=>{this.setState({isOpen:!this.state.isOpen})}}render(){return c.a.createElement(S.a,{color:"dark",dark:!0,expand:"md",className:"fixed-top"},c.a.createElement(O.a,{href:"#"},"Mifare Online"),c.a.createElement(F.a,{onClick:this.handleToggle}),c.a.createElement(j.a,{isOpen:this.state.isOpen,navbar:!0},c.a.createElement(T.a,{navbar:!0},u.a.map({"/mifare/editor":"Mifare Editor","/mifare/access-bits":"Access Bits","/mifare/help":"Help"},(e,t)=>c.a.createElement(I.a,{key:e},c.a.createElement(C.a,{className:"nav-link",to:t},e))))))}}var x=M,N=a("IujW"),D=a.n(N),U=a("1Yj4"),K=a("dNbG"),R=a.n(K),L=a("WKhN"),P=a.n(L);class Y extends c.a.PureComponent{render(){return c.a.createElement(U.a,null,c.a.createElement(D.a,{className:P.a.markdown,source:R.a}))}}var W=Y,_=a("rhny"),X=a("UkYX"),z=a("jlqz");class q extends c.a.Component{constructor(){super(...arguments),this.state={block:new X.a}}render(){return c.a.createElement(U.a,null,c.a.createElement(_.a,null,c.a.createElement(z.a,{block:this.state.block,onChange:e=>this.setState({block:e})})))}}var V=q,G=a("BElC"),Q=a("aLZG"),Z=a("ok1R"),H=a("sOKU"),J=a("U18y"),$=a("m6v8"),ee=a("Bm2j"),te=a.n(ee),ae=a("DCcX"),ne=a("vkoW"),se=a("CaDr"),re=a("OBzv"),ce=a("LsS1");class ie extends c.a.Component{constructor(){super(...arguments),this.handleSaveFile=e=>{const t=document.createElement("a");t.href=URL.createObjectURL(Object(ce.d)(this.props.card,e)),t.download=Object(ce.b)(this.props.card,e),t.click()}}render(){const e={[ce.a.MFD]:"Mifare Dump (.mfd)",[ce.a.EML]:"Proxmark3 Dump (.eml)",[ce.a.MCT]:"Mifare Classic Tool (.mct)",[ce.a.Text]:"Text - GBK Encoded (.txt)"};return c.a.createElement(ae.a,{isOpen:this.props.open,toggle:this.props.onToggle},c.a.createElement(ne.a,{toggle:this.props.onToggle},"Save File Type"),c.a.createElement(se.a,null,u.a.map(e,(e,t)=>c.a.createElement(H.a,{key:t,block:!0,onClick:()=>this.handleSaveFile(t)},e))),c.a.createElement(re.a,null,c.a.createElement(H.a,{color:"secondary",onClick:this.props.onToggle},"Close")))}}var oe=ie;var le=e=>c.a.createElement(ae.a,{isOpen:e.open,toggle:e.onToggle,className:te.a["show-key-modal"]},c.a.createElement(ne.a,{toggle:e.onToggle},"Show Keys"),c.a.createElement(se.a,null,u.a.map(e.keys,e=>c.a.createElement("code",{key:e},e))),c.a.createElement(re.a,null,c.a.createElement(H.a,{color:"secondary",onClick:e.onToggle},"Close")));class de extends c.a.Component{constructor(){super(...arguments),this.state={isOpenShowKeys:!1,isOpenSaveFile:!1},this.makeMifareEditor=()=>{if(u.a.isNil(this.props.blocks))return c.a.createElement(Q.a,{color:"warning"},"Please load mifare dump file.");const e=J.a.from(this.props.blocks);return c.a.createElement(Z.a,null,c.a.createElement($.a,{card:e,onChange:this.handleUpdateCard}),c.a.createElement(le,{keys:e.getKeys(),open:this.state.isOpenShowKeys,onToggle:this.handleShowKeysToggle}),c.a.createElement(oe,{card:e,open:this.state.isOpenSaveFile,onToggle:this.handleSaveFileToggle}))},this.handleShowKeysToggle=()=>{this.setState({isOpenShowKeys:!this.state.isOpenShowKeys})},this.handleSaveFileToggle=()=>{this.setState({isOpenSaveFile:!this.state.isOpenSaveFile})},this.handleLoadFile=()=>{const e=document.createElement("input");e.type="file",e.addEventListener("change",()=>{this.props.dispatch(G.a.action(u.a.first(e.files)))}),e.click()},this.handleUpdateCard=e=>{this.props.dispatch(Object(G.b)(e.toCard()))}}render(){const e=u.a.isNil(this.props.blocks);return c.a.createElement(U.a,null,c.a.createElement(Z.a,{className:te.a.toolbar},c.a.createElement(H.a,{onClick:this.handleLoadFile},"Load File"),c.a.createElement(H.a,{hidden:e,onClick:this.handleSaveFileToggle},"Save File"),c.a.createElement(H.a,{hidden:e,onClick:this.handleShowKeysToggle},"Show Keys")),this.makeMifareEditor())}}var ue=Object(m.c)(e=>({blocks:e.mifare.blocks}))(de);a("+eM2");const me={"/mifare/editor":ue,"/mifare/access-bits":V,"/mifare/help":W},he=()=>c.a.createElement(m.a,{store:y},c.a.createElement(l.a,{history:B},c.a.createElement(c.a.Fragment,null,c.a.createElement(x,null),c.a.createElement(h.a,null,u.a.map(me,(e,t)=>c.a.createElement(p.a,{key:t,path:t,component:e})),c.a.createElement(f.a,{to:"/mifare/editor"})))));s()(()=>{const e=c.a.createElement(he,null),t=document.createElement("main");(e=>{document.body=document.createElement("body"),document.body.appendChild(e)})(t),o.a.render(e,t)})},"8aO9":function(e,t,a){"use strict";(function(e){function n(t,a,n){const s=e.from(t);return s.set(a,n),s}function s(e){return void 0===e?"":e.toString("hex").toUpperCase()}a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return s}))}).call(this,a("tjlA").Buffer)},BElC:function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return o}));var n=a("xvzY"),s=a("UpXu"),r=a("LsS1");const c=Object(n.actionCreatorFactory)("MIFARE"),i=Object(s.asyncFactory)(c)("LOAD_MIFARE",r.c),o=c("UPDATE_MIFARE")},Bm2j:function(e,t,a){e.exports={toolbar:"_22fe9CJtwrtKju6x_idFKV","show-key-modal":"_2fVQLn3VZNutWMgEZswmWY",editor:"_3fZwIhTqVyEIJ2lcNmU8Is","manufacturer-block":"_1acTP8vVfNkdMlmghPxUmK","key-a":"_3Oh5wPeMERncpRZXlWB_ss","key-b":"_2r1HSdvJL53TpSmG_UQmZC","access-bits":"_1W3gUhnY3JVRS44BhemsoF",access:"_3Qijaj3IKh9hnSrn04kvXi",verified:"_31p7MSPkQGAqIqRnmp6Myz"}},D1ZP:function(e,t,a){"use strict";a.d(t,"a",(function(){return d}));var n=a("LvDl"),s=a.n(n),r=a("q1tI"),c=a.n(r),i=a("iqOp"),o=a("YGfb"),l=a("FQuf");class d extends c.a.Component{constructor(){super(...arguments),this.state={isOpen:!1},this.target=c.a.createRef(),this.makeDataBlock=e=>{const t=new l.a(e),a={Read:t.read,Write:t.write,Increment:t.increment,"Decrement, Transfer, Restore":t.decrement,Application:t.application};return this.makeDetailsList(a)},this.makeSectorTrailer=e=>{const t=new l.b(e),a={"Read for Key A":t.readKeyA,"Write for Key A":t.writeKeyA,"Read for Access Bits":t.readAccessBits,"Write for Access Bits":t.writeAccessBits,"Read for Key B":t.readKeyB,"Write for Key B":t.writeKeyB,Remark:t.remark};return this.makeDetailsList(a,["Remark"])},this.makeDetailsList=(e,t)=>c.a.createElement("dl",null,s.a.map(e,(e,a)=>{let n=e||"never";if(s.a.isArray(e))n=s.a.map(e,e=>e+" Key").join(" / ");else if(s.a.isNil(e)&&s.a.includes(t,a))return null;return c.a.createElement(c.a.Fragment,{key:a},c.a.createElement("dt",null,a),c.a.createElement("dd",null,n))})),this.handleToggle=()=>{this.setState({isOpen:!this.state.isOpen})}}render(){let e;return this.state.isOpen&&this.target.current&&(e=c.a.createElement(i.a,{placement:"right",isOpen:!0,target:this.target.current,toggle:this.handleToggle,trigger:"legacy"},c.a.createElement(o.a,null,this.props.index<3?this.makeDataBlock(this.props.bits):this.makeSectorTrailer(this.props.bits)))),c.a.createElement(c.a.Fragment,null,c.a.createElement("span",{ref:this.target,onClick:this.handleToggle},s.a.padStart(this.props.bits.toString(2),3,"0")),e)}}},FQuf:function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"b",(function(){return c}));var n=a("LvDl"),s=a.n(n);class r{constructor(e){this.bits=e}get read(){return s.a.includes([0,2,4,6,0],this.bits)?["A","B"]:s.a.includes([3,5],this.bits)?["B"]:void 0}get write(){return 0===this.bits?["A","B"]:s.a.includes([4,6,3],this.bits)?["B"]:void 0}get increment(){return 0===this.bits?["A","B"]:6===this.bits?["B"]:void 0}get decrement(){if(s.a.includes([0,6,1],this.bits))return["A","B"]}get transfer(){return this.decrement}get restore(){return this.decrement}get application(){return 0===this.bits?"transport configuration":s.a.includes([6,1],this.bits)?"value block":"read/write block"}toString(){return this.bits.toString(2).padStart(3,"0")}}class c{constructor(e){this.bits=e}get readKeyA(){}get writeKeyA(){return s.a.includes([0,1],this.bits)?["A"]:s.a.includes([4,3],this.bits)?["B"]:void 0}get readAccessBits(){return s.a.includes([0,2,1],this.bits)?["A"]:["A","B"]}get writeAccessBits(){return 1===this.bits?["A"]:s.a.includes([3,5],this.bits)?["B"]:void 0}get readKeyB(){if(s.a.includes([0,2,1],this.bits))return["A"]}get writeKeyB(){return s.a.includes([0,1],this.bits)?["A"]:s.a.includes([4,3],this.bits)?["B"]:void 0}get remark(){return s.a.includes([0,2],this.bits)?"Key B may be read":1===this.bits?"transport configuration":void 0}toString(){return this.bits.toString(2).padStart(3,"0")}}},LsS1:function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return n})),a.d(t,"c",(function(){return m})),a.d(t,"d",(function(){return p})),a.d(t,"b",(function(){return f}));var n,s=a("NAv5"),r=a("LvDl"),c=a.n(r),i=a("aI7n"),o=a("8aO9"),l=a("v1xd"),d=a("U18y");!function(e){e.MFD="mfd",e.EML="eml",e.MCT="mct",e.Text="txt"}(n||(n={}));const u={[n.MFD]:e=>e,[n.EML](t){const a=Object(l.a)(/[0-9A-F]{32}/gi,t.toString(),e=>e[0]);return e.from(a.join(""),"hex")},[n.MCT](t){const a=Object(l.a)(/[0-9A-F]{32}/gi,t.toString(),e=>e[0]);return e.from(a.join(""),"hex")},[n.Text](t){const a=Object(l.a)(/(?:[0-9A-F]{2}(?:\s+)?){16}/gi,t.toString(),e=>e[0].replace(/\s+/g,""));return e.from(a.join(""),"hex")}},m=async e=>{if(c.a.isNil(e))throw new Error("unknown data");const t=await Object(i.a)(e);for(const e of c.a.values(u))try{const a=e(t);if(d.a.isSupportedCard(a))return a}catch(e){}throw new Error("unknown data")},h={[n.MFD]:e=>e.toCard(),[n.EML]:e=>e.getBlocks().map(o.b).join("\n"),[n.MCT]:e=>e.getSectors().flatMap((e,t)=>["+Sector: "+t,e.map(o.b).join("\n")]).join("\n"),[n.Text](t){const a=t.getSectors().map((e,t)=>[t+" Çø¿é",e.map((e,t)=>`${t} ÉÈÇø: ${Object(o.b)(e).match(/.{2}/g).join(" ")}`).join("\r\n")].join("\r\n"));return e.from(a.join("\r\n\r\n"),"binary")}},p=(e,t)=>new Blob([h[t](e)],{type:"application/octet-stream"}),f=(e,t)=>`UID_${Object(o.b)(e.getUID())}_${Object(s.format)(Date.now(),"YYYYMMDDHHMMss")}.${t}`}).call(this,a("tjlA").Buffer)},QX0P:function(e,t,a){"use strict";(function(e){var n=a("BElC"),s=a("V/h/"),r=a("TY1u");const c={blocks:void 0};t.a=Object(r.reducerWithInitialState)(c).case(n.a.async.failed,e=>Object(s.a)(e,e=>{e.blocks=void 0})).case(n.a.async.done,(e,{result:t})=>Object(s.a)(e,e=>{e.blocks=t})).case(n.b,(t,a)=>Object(s.a)(t,t=>{t.blocks=e.from(a)}))}).call(this,a("tjlA").Buffer)},U18y:function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return o}));var n=a("Mpt7"),s=a("LvDl"),r=a.n(s),c=a("8aO9"),i=a("UkYX");class o extends(Object(n.b)({blocks:Object(n.a)()})){static from(t){if(r.a.isNil(o.isSupportedCard(t)))throw new Error("The card is not supported.");const a=r.a.times(t.length/16,a=>{const n=16*a,s=n+16;return e.from(t.slice(n,s))});return new this({blocks:Object(n.a)(a)})}static isSupportedCard(e){return r.a.includes([800,1024,2048,4096],e.length)}getUID(){const t=this.getBlock(0,0);if(!r.a.isUndefined(t))return e.from(t.slice(0,4))}setUID(e){if(4!==e.length)throw new Error("uid length error");const t=e.reduce((e,t)=>e^t),a=this.getBlock(0,0);if(!r.a.isUndefined(a))return a.set(e,0),a.writeUInt8(t,e.length),this.setBlock(0,0,a)}getManufacturerData(){const t=this.getBlock(0,0);if(!r.a.isUndefined(t))return e.from(t.slice(5))}getBlocks(){return this.blocks}getBlock(t,a){const n=l(t,a),s=this.blocks.get(n);if(!r.a.isUndefined(s))return e.from(s)}setBlock(e,t,a){const n=l(e,t);return this.set("blocks",this.blocks.set(n,a))}getSectors(){const e=[];for(let t=0,a=4;t<256;){128===t&&(a=16);const n=this.blocks.slice(t,t+=a);if(n.isEmpty())break;e.push(n)}return Object(n.a)(e)}getKeys(){const t=[];return this.getSectors().forEach(e=>{const a=new i.a({block:e.last()});t.push(a.getKey("A"),a.getKey("B"))}),t.sort(e.compare),t.reverse(),r.a.union(r.a.map(t,c.b))}toCard(){return e.concat(this.blocks.toArray())}isEmpty(){return this.blocks.isEmpty()}}function l(e,t){return(e<32?4*e:128+16*(e-32))+t}}).call(this,a("tjlA").Buffer)},UkYX:function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return c}));var n=a("Mpt7"),s=a("8aO9");const r=e.from("FFFFFFFFFFFFFF078069FFFFFFFFFFFF","hex");class c extends(Object(n.b)({block:r})){static from(t){return new this({block:e.from(t)})}static getBitsIndex(e,t){if(4!==t&&16!==t)throw new Error("blocks length error");return 16===t?Math.trunc(e/5):e}isVerified(e){return 7==(this.getBits(e,!1)^this.getBits(e,!0))}getBits(e,t=!1){const a=this.getAccessBits().readUInt32LE(0),n=t?0:12;return l(i(a,e+n+0),i(a,e+n+4),i(a,e+n+8))}setBits(e,t){const a=this.getAccessBits();let n,s=a.readInt32LE(0);for(let a=2,r=0;a>=0;a--,r+=4)n=i(t,a),s=o(s,e+12+r,n),s=o(s,e+0+r,n?0:1);return a.writeInt32LE(s,0),this.setAccessBits(a)}getAccessBits(){return e.from(this.block.slice(6,10))}setAccessBits(e){if(4!==e.length)throw new Error("access bits length error");return this.set("block",Object(s.a)(this.block,e,6))}getKey(t){const a="A"===t?0:10;return e.from(this.block.slice(a,a+6))}setKey(e,t){if(6!==t.length)throw new Error("block length error.");const a="A"===e?0:10;return this.set("block",Object(s.a)(this.block,t,a))}}const i=(e,t)=>0==(e&1<<t)?0:1,o=(e,t,a)=>e&~(1<<t)|a<<t,l=(e,t,a)=>4*e+2*t+a}).call(this,a("tjlA").Buffer)},WKhN:function(e,t,a){e.exports={markdown:"_XrhqD6XQZODGkPvr2f-q"}},aI7n:function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return n}));const n=t=>new Promise((a,n)=>{const s=new FileReader;s.addEventListener("abort",n),s.addEventListener("error",n),s.addEventListener("load",()=>{a(e.from(s.result))}),s.readAsArrayBuffer(t)})}).call(this,a("tjlA").Buffer)},dNbG:function(e,t){e.exports="# MIFARE Cracker tools\n\n1. Mifare Classic Offline Cracker\n\n   See https://github.com/nfc-tools/mfoc\n\n2. Mifare Offline Cracking GUI for Windows\n\n   See http://www.huuf.info/OV/\n\n3. MIFARE Classic Universal toolkit\n\n   See https://github.com/nfc-tools/mfcuk\n\n4. Proxmark 3\n\n   See https://github.com/Proxmark/proxmark3\n\n5. Chameleon Mini\n\n   See https://github.com/emsec/ChameleonMini\n\n6. libnfc, mfoc and mfcuk for Windows build tutorial (Chinese ONLY)\n\n   See https://zhuanlan.zhihu.com/p/51379667\n\n   See https://www.jianshu.com/p/c02b7f7a7cfa\n\n# MIFARE Classic Card Types\n\n1. Standard MIFARE Classic Card\n\n   - 0 Block is NOT WRIABLE.\n   - UID is randomly by the manufacturer.\n   - Product page: https://www.mifare.net/en/products/chip-card-ics/mifare-classic/\n   - Product page: https://nxp.com/pages/:NTAG-TAGS-AND-LABELS\n   - Product page: https://nxp.com/pages/:MF1S50YYX_V1\n   - Product page: https://nxp.com/pages/:MF1S70YYX_V1\n\n2. UID Card\n\n   - All blocks writeable with magic command.\n   - Magic commands can bypass authentication.\n   - See https://stackoverflow.com/a/42299452\n\n3. CUID Card\n\n   - The UID card magic command is not processed.\n   - Based standard commands write 0 block.\n\n4. FUID Card\n\n   - The UID card magic command is not processed.\n   - Based standard commands write 0 block with write once.\n\n5. UFUID Card\n\n   - Based on UID Card.\n   - After the locked card, the behavior is consistent with Standard MIFARE Classic Card.\n   - The lock card is a magic command.\n   - See http://www.proxmark.org/forum/viewtopic.php?pid=32307\n\n6. SUID Card\n\n   - Based on CUID Card.\n   - After the locked card, the behavior is consistent with Standard MIFARE Classic Card.\n   - The lock card is a magic command.\n\n7. KUID Card\n\n   - The UID card magic command is not processed.\n   - Based non-standard commands write card.\n\n# Card Reader\n\n1. ACR122U USB NFC Reader\n\n   - Based PN532 solution\n   - Product page: https://www.acs.com.hk/en/products/3/acr122u-usb-nfc-reader/\n\n2. MFRC522: Standard performance MIFARE® and NTAG® frontend\n\n   - Product page: https://www.nxp.com/pages/:MFRC52202HN1\n\n3. PN532: NFC integrated solution\n\n   - Product page: https://www.nxp.com/pages/:PN5321A3HN\n\n4. PN5180: High-performance multi-protocol full NFC Forum-compliant frontend\n\n   - Product page: https://www.nxp.com/pages/:PN5180\n"},"e/Y3":function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var n=a("jlqz"),s=a("q1tI"),r=a.n(s),c=a("DCcX"),i=a("vkoW"),o=a("CaDr");const l=({onToggle:e,onChange:t,block:a})=>r.a.createElement(c.a,{isOpen:!0,toggle:e,size:"lg"},r.a.createElement(i.a,{toggle:e},"Access Bits Editor"),r.a.createElement(o.a,null,r.a.createElement(n.a,{block:a,onChange:t})))},"j+Us":function(e,t,a){},jlqz:function(e,t,a){"use strict";a.d(t,"a",(function(){return B}));var n=a("TSYQ"),s=a.n(n),r=a("LvDl"),c=a.n(r),i=a("q1tI"),o=a.n(i),l=a("F66N"),d=a("arvA"),u=a("9a8N"),m=a("8aO9"),h=a("XAkp"),p=a("FQuf"),f=a("+OYU"),b=a.n(f);const g=[0,2,4,6,1,3,5,7],k=e=>o.a.createElement(h.a,{responsive:!0,size:"sm",className:b.a["access-bits-block"]},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",null,"#"),o.a.createElement("th",null,"Read"),o.a.createElement("th",null,"Write"),o.a.createElement("th",null,"Increment"),o.a.createElement("th",{title:"Transfer and Restore"},"Decrement"),o.a.createElement("th",null,"Application"))),o.a.createElement("tbody",null,c.a.map(g,t=>{const a=new p.a(t);return o.a.createElement("tr",{key:t,className:s()({[b.a.selected]:t===e.bits}),onClick:()=>e.onChange(t)},o.a.createElement("td",null,c.a.padStart(t.toString(2),3,"0")),o.a.createElement("td",null,w(a.read)),o.a.createElement("td",null,w(a.write)),o.a.createElement("td",null,w(a.increment)),o.a.createElement("td",null,w(a.decrement)),o.a.createElement("td",null,a.application))}))),E=e=>o.a.createElement(h.a,{responsive:!0,size:"sm",className:b.a["access-bits-block"]},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",null,"#"),o.a.createElement("th",null,"Key A (Read/Write)"),o.a.createElement("th",null,"Access Bits (Read/Write)"),o.a.createElement("th",null,"Key B (Read/Write)"),o.a.createElement("th",null,"Remark"))),o.a.createElement("tbody",null,c.a.map(g,t=>{const a=new p.b(t);return o.a.createElement("tr",{key:t,className:s()({[b.a.selected]:t===e.bits}),onClick:()=>e.onChange(t)},o.a.createElement("td",null,c.a.padStart(t.toString(2),3,"0")),o.a.createElement("td",null,w(a.readKeyA)," / ",w(a.writeKeyA)),o.a.createElement("td",null,w(a.readAccessBits)," / ",w(a.writeAccessBits)),o.a.createElement("td",null,w(a.readKeyB)," / ",w(a.writeKeyB)),o.a.createElement("td",null,a.remark))}))),w=e=>void 0===e?"never":Array.isArray(e)?e.join("")+" Key":e;class B extends o.a.Component{constructor(){super(...arguments),this.state={activeTab:0},this.makeTabs=()=>c.a.map(c.a.range(0,4),e=>{const t=s()({active:this.state.activeTab===e});return o.a.createElement(l.a,{key:e},o.a.createElement(d.a,{className:t,onClick:()=>this.handleToggle(e)},e," Block"))}),this.makeContent=()=>{const{onChange:e,block:t}=this.props,a=this.state.activeTab,n=a<3?k:E;return o.a.createElement(n,{bits:t.getBits(a),onChange:n=>e(t.setBits(a,n))})},this.handleToggle=e=>{this.state.activeTab!==e&&this.setState({activeTab:e})}}render(){const e=this.props.block.getAccessBits();return o.a.createElement(o.a.Fragment,null,o.a.createElement("p",null,Object(m.b)(e)),o.a.createElement(u.a,{tabs:!0,className:b.a["nav-tab"]},this.makeTabs()),this.makeContent())}}},m6v8:function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return b}));var n=a("TSYQ"),s=a.n(n),r=a("LvDl"),c=a.n(r),i=a("q1tI"),o=a.n(i),l=a("XAkp"),d=a("8aO9"),u=a("UkYX"),m=a("e/Y3"),h=a("D1ZP"),p=a("Bm2j"),f=a.n(p);class b extends o.a.Component{constructor(){super(...arguments),this.state={isOpenAccessBitsEditorModal:!1,sectorIndex:0,blockIndex:0},this.makeAccessBitsModal=()=>{const e=this.props.card.getBlock(this.state.sectorIndex,this.state.blockIndex);if(this.state.isOpenAccessBitsEditorModal)return o.a.createElement(m.a,{block:u.a.from(e),onChange:this.handleUpdateBlock,onToggle:this.handleOpenAccessBitsEditorModal})},this.handleOpenAccessBitsEditorModal=()=>{this.setState({isOpenAccessBitsEditorModal:!this.state.isOpenAccessBitsEditorModal})},this.makeBlock=(e,t,a,n)=>{const s=0===t&&o.a.createElement("td",{rowSpan:a.size},n);return o.a.createElement("tr",{key:t,"data-sector":n,"data-block":t},s,o.a.createElement("td",null,t),o.a.createElement("td",null,this.makeData(e,t,n)),this.makeAccessBits(a,t))},this.makeAccessBits=(e,t)=>{const a=new u.a({block:e.last()}),n=u.a.getBitsIndex(t,e.size);let r;if(16===e.size){if(t%5!=0||n>3)return null;t%5==0&&n<3&&(r=5)}const c=s()(f.a.access,{[f.a.verified]:a.isVerified(n)});return o.a.createElement("td",{className:c,rowSpan:r},o.a.createElement(h.a,{bits:a.getBits(n),index:n}))},this.makeData=(e,t,a)=>{if(0===a&&0===t)return o.a.createElement("section",{className:f.a["manufacturer-block"]},Object(d.b)(e));if(t===(a<32?3:15)){const t=new u.a({block:e});return o.a.createElement("section",null,o.a.createElement("b",{className:f.a["key-a"]},Object(d.b)(t.getKey("A"))),o.a.createElement("b",{className:f.a["access-bits"],onClick:this.handleAccessBitsEditor},Object(d.b)(t.getAccessBits())),o.a.createElement("b",{className:f.a["key-b"]},Object(d.b)(t.getKey("B"))))}return Object(d.b)(e)},this.handleAccessBitsEditor=e=>{const t=e.currentTarget.closest("tr");if(null===t)return;const a=Number.parseInt(t.dataset.sector,10),n=Number.parseInt(t.dataset.block,10);this.setState({isOpenAccessBitsEditorModal:!0,sectorIndex:a,blockIndex:n})},this.handleUpdateBlock=t=>{let a;if(e.isBuffer(t))a=t;else{if(!(t instanceof u.a))return;a=t.block}this.props.onChange(this.props.card.setBlock(this.state.sectorIndex,this.state.blockIndex,a))}}render(){const e=this.props.card.getSectors().map((e,t)=>e.map(c.a.partialRight(this.makeBlock,t)));return o.a.createElement(l.a,{responsive:!0,bordered:!0,size:"sm",className:f.a.editor},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",null,"Sector"),o.a.createElement("th",null,"Block"),o.a.createElement("th",null,"Data"),o.a.createElement("th",null,"Access"))),o.a.createElement("tbody",null,e),this.makeAccessBitsModal())}}}).call(this,a("tjlA").Buffer)},v1xd:function(e,t,a){"use strict";function n(e,t,a){const n=[];let s;for(;s=e.exec(t);)n.push(a(s));return n}a.d(t,"a",(function(){return n}))}},[["2YZa",1,2]]]);